{% extends 'base.html' %} {% set active_page = 'collections' %} {% block title
%}{{ collection_name|title }} - Elvin Salcedo{% endblock %} {% block content %}

<section class="container mx-auto px-4 py-8">
  <h1
    class="text-4xl font-display font-medium tracking-wide text-stone-800 mb-8"
  >
    {{ collection_name|title }}
  </h1>
  {% if photos %}
  <!-- Carousel Container -->
  <div class="max-w-5xl mx-auto">
    <div class="flex items-center gap-8">
      <!-- Previous Button -->
      <button
        id="prev-btn"
        class="flex-shrink-0 bg-white hover:bg-stone-50 text-stone-800 rounded-full p-3 shadow-lg transition-all"
      >
        <svg
          class="w-6 h-6"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M15 19l-7-7 7-7"
          />
        </svg>
      </button>

      <!-- Images -->
      <div id="carousel" class="flex-1 overflow-hidden rounded-lg shadow-xl">
        <div
          id="carousel-track"
          class="flex transition-transform duration-500 ease-in-out"
        >
          {% for photo in photos %}
          <div class="min-w-full">
            <img
              src="{{ photo }}"
              alt="Photo from {{ collection_name }}"
              class="w-full h-auto object-cover"
            />
          </div>
          {% endfor %}
        </div>
      </div>

      <!-- Next Button -->
      <button
        id="next-btn"
        class="flex-shrink-0 bg-white hover:bg-stone-50 text-stone-800 rounded-full p-3 shadow-lg transition-all"
      >
        <svg
          class="w-6 h-6"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M9 5l7 7-7 7"
          />
        </svg>
      </button>
    </div>

    <!-- Dots Indicator -->
    <div id="dots" class="flex justify-center gap-2 mt-6">
      {% for photo in photos %}
      <button
        class="dot w-3 h-3 rounded-full bg-stone-300 hover:bg-stone-400 transition-colors"
        data-index="{{ loop.index0 }}"
      ></button>
      {% endfor %}
    </div>
  </div>

  <script>
    // Carousel functionality
    const track = document.getElementById('carousel-track');
    const prevBtn = document.getElementById('prev-btn');
    const nextBtn = document.getElementById('next-btn');
    const dots = document.querySelectorAll('.dot');
    const totalSlides = {{ photos|length }};
    let currentIndex = 0;

    function updateCarousel() {
      // Move the track
      track.style.transform = `translateX(-${currentIndex * 100}%)`;

      // Update dots
      dots.forEach((dot, index) => {
        if (index === currentIndex) {
          dot.classList.remove('bg-stone-300');
          dot.classList.add('bg-orange-400');
        } else {
          dot.classList.remove('bg-orange-400');
          dot.classList.add('bg-stone-300');
        }
      });
    }

    // Previous button
    prevBtn.addEventListener('click', () => {
      currentIndex = (currentIndex - 1 + totalSlides) % totalSlides;
      updateCarousel();
    });

    // Next button
    nextBtn.addEventListener('click', () => {
      currentIndex = (currentIndex + 1) % totalSlides;
      updateCarousel();
    });

    // Dot navigation
    dots.forEach(dot => {
      dot.addEventListener('click', (e) => {
        currentIndex = parseInt(e.target.dataset.index);
        updateCarousel();
      });
    });

    // Keyboard navigation
    document.addEventListener('keydown', (e) => {
      if (e.key === 'ArrowLeft') {
        prevBtn.click();
      } else if (e.key === 'ArrowRight') {
        nextBtn.click();
      }
    });

    // Initialize
    updateCarousel();
  </script>

  {% else %}
  <p class="text-stone-600 text-center py-12">
    No photos in this collection yet.
  </p>
  {% endif %}
</section>
{% endblock %}
