<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{% block title %}Elvin Salcedo{% endblock %}</title>
    <link rel="icon" type="image/x-icon" href="{{ url_for('static', path='/images/favicon.ico') }}">
    <!-- Google Font -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Caveat:wght@400..700&family=Libre+Baskerville:ital,wght@0,400;0,700;1,400&family=Old+Standard+TT:ital,wght@0,400;0,700;1,400&family=Roboto+Mono:ital,wght@0,100..700;1,100..700&display=swap"
      rel="stylesheet"
    />

    <link
      href="{{ url_for('static', path='/css/output.css') }}"
      rel="stylesheet"
    />
    <script
      src="https://cdn.jsdelivr.net/npm/htmx.org@2.0.8/dist/htmx.min.js"
      integrity="sha384-/TgkGk7p307TH7EXJDuUlgG3Ce1UVolAOFopFekQkkXihi5u/6OCvVKyz1W+idaz"
      crossorigin="anonymous"
    ></script>
  </head>
  <body>
    <header>
      {% set active_page = active_page|default('home') %}
      <nav class="my-4 mx-8">
        <div class="flex justify-between items-center">
          <div class="my-4 mx-8">
            <a href="/" class="text-3xl font-display font-medium tracking-widest"
              >Elvin Salcedo</a
            >
          </div>

          <button id="mobile-menu-button" class="lg:hidden p-2 text-stone-600 hover:text-orange-400">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
            </svg>
          </button>

          <div class="hidden lg:flex items-center">
            <ul class="flex space-x-4 my-4 mx-8 font-light text-stone-600">
              <li>
                <a
                  href="{{ url_for('home') }}"
                  class="{% if active_page == 'home' %} text-orange-400 font-medium {% else %} text-stone-600 hover:text-orange-400 {% endif %}"
                  >Home</a
                >
              </li>
              <li class="relative" id="collections-dropdown">
                <a
                  href="#"
                  class="{% if active_page == 'collections' %} text-orange-400 font-medium {% else %} text-stone-600 hover:text-orange-400 {% endif %}"
                  >Collections</a
                >
                <div id="collections-menu" class="hidden absolute left-0 top-full mt-1 w-48 bg-white shadow-lg rounded-md border border-stone-200 z-50">
                  <ul class="py-2">
                    {% for collection in collections() %}
                    <li>
                      <a
                        href="{{ url_for('collection', collection_name=collection) }}"
                        class="block px-4 py-2 text-sm text-stone-600 hover:bg-orange-50 hover:text-orange-400 transition-colors"
                      >
                        {{ collection|title }}
                      </a>
                    </li>
                    {% endfor %}
                  </ul>
                </div>
              </li>
              <li>
                <a
                    href="{{ url_for('about')}}"
                  class="{% if active_page == 'about' %} text-orange-400 font-medium {% else %} text-stone-600 hover:text-orange-400 {% endif %}"
                  >About</a
                >
              </li>
            </ul>
          </div>
        </div>

        <div id="mobile-menu" class="hidden lg:hidden mt-4">
          <ul class="space-y-2 font-light text-stone-600">
            <li>
              <a
                href="{{ url_for('home') }}"
                class="block py-2 {% if active_page == 'home' %} text-orange-400 font-medium {% else %} text-stone-600 hover:text-orange-400 {% endif %}"
                >Home</a
              >
            </li>
            <li>
              <button id="mobile-collections-toggle" class="w-full text-left py-2 {% if active_page == 'collections' %} text-orange-400 font-medium {% else %} text-stone-600 hover:text-orange-400 {% endif %}">
                Collections
                <svg class="inline w-4 h-4 ml-1 transition-transform" id="mobile-collections-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                </svg>
              </button>
              <ul id="mobile-collections-menu" class="hidden pl-4 space-y-2 mt-2">
                {% for collection in collections() %}
                <li>
                  <a
                    href="{{ url_for('collection', collection_name=collection) }}"
                    class="block py-1 text-sm text-stone-600 hover:text-orange-400"
                  >
                    {{ collection|title }}
                  </a>
                </li>
                {% endfor %}
              </ul>
            </li>
            <li>
              <a
                href="{{ url_for('about')}}"
                class="block py-2 {% if active_page == 'about' %} text-orange-400 font-medium {% else %} text-stone-600 hover:text-orange-400 {% endif %}"
                >About</a
              >
            </li>
          </ul>
        </div>
      </nav>
    </header>
    <main>{% block content %}{% endblock %}</main>

    <script>
      document.addEventListener('DOMContentLoaded', function() {
        const dropdown = document.getElementById('collections-dropdown');
        const menu = document.getElementById('collections-menu');
        let hideTimeout;

        if (dropdown && menu) {
          function showMenu() {
            clearTimeout(hideTimeout);
            menu.classList.remove('hidden');
          }

          function hideMenu() {
            hideTimeout = setTimeout(function() {
              menu.classList.add('hidden');
            }, 200);
          }

          dropdown.addEventListener('mouseenter', showMenu);
          dropdown.addEventListener('mouseleave', hideMenu);

          menu.addEventListener('mouseenter', showMenu);
          menu.addEventListener('mouseleave', hideMenu);
        }

        const mobileMenuButton = document.getElementById('mobile-menu-button');
        const mobileMenu = document.getElementById('mobile-menu');
        const mobileCollectionsToggle = document.getElementById('mobile-collections-toggle');
        const mobileCollectionsMenu = document.getElementById('mobile-collections-menu');
        const mobileCollectionsIcon = document.getElementById('mobile-collections-icon');

        if (mobileMenuButton && mobileMenu) {
          mobileMenuButton.addEventListener('click', function() {
            mobileMenu.classList.toggle('hidden');
          });
        }

        if (mobileCollectionsToggle && mobileCollectionsMenu && mobileCollectionsIcon) {
          mobileCollectionsToggle.addEventListener('click', function() {
            mobileCollectionsMenu.classList.toggle('hidden');
            mobileCollectionsIcon.classList.toggle('rotate-180');
          });
        }
      });
    </script>
  </body>
</html>
